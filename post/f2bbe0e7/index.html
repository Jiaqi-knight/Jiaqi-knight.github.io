<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>machine learning for chaos system-基础知识 | DEAL-II-Fluid</title><meta name="description" content="学习资源: Udemy course: Recurrent Neural Networks in Python Google Colab   如何从Colab导入文档  Github   Numpy Matrix arithmetic Tensor (aka. “arrays”)(note the name: Tensorflow) 1-D tensor(vector), 2-D tensor(m"><meta name="keywords" content="chaos"><meta name="author" content="Jiaqi"><meta name="copyright" content="Jiaqi"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://deal-ii.com/post/f2bbe0e7/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="machine learning for chaos system-基础知识"><meta property="og:url" content="http://deal-ii.com/post/f2bbe0e7/"><meta property="og:site_name" content="DEAL-II-Fluid"><meta property="og:description" content="学习资源: Udemy course: Recurrent Neural Networks in Python Google Colab   如何从Colab导入文档  Github   Numpy Matrix arithmetic Tensor (aka. “arrays”)(note the name: Tensorflow) 1-D tensor(vector), 2-D tensor(m"><meta property="og:image" content="https://i.loli.net/2020/12/13/KPc9zZ4hNn3CMta.png"><meta property="article:published_time" content="2020-12-11T04:58:34.000Z"><meta property="article:modified_time" content="2020-12-14T03:38:40.816Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="next" title="machine learning for chaos system-测试篇" href="http://deal-ii.com/post/d03a598f/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-14 11:38:40'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/Jiaqi-knight/imgBase@main/me.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">19</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">26</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">14</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 索引</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/x-codepen/"><i class="fa-fw fa fa-magic"></i><span> codepen</span></a></li><li><a class="site-page" href="/x-gallery/"><i class="fa-fw fa fa-beer"></i><span> gallery</span></a></li><li><a class="site-page" href="/x-shadertoy/"><i class="fa-fw fa fa-star"></i><span> shadertoy</span></a></li><li><a class="site-page" href="/x-webgl1/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl1</span></a></li><li><a class="site-page" href="/x-webgl2/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl2</span></a></li><li><a class="site-page" href="/x-markdown/"><i class="fa-fw fa fa-tree"></i><span> Vditor</span></a></li><li><a class="site-page" href="/x-DNN/"><i class="fa-fw fa fa-heartbeat"></i><span> DNN</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#学习资源"><span class="toc-number">1.</span> <span class="toc-text">学习资源:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Numpy"><span class="toc-number">2.</span> <span class="toc-text">Numpy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Matplotlib"><span class="toc-number">3.</span> <span class="toc-text">Matplotlib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pandas"><span class="toc-number">4.</span> <span class="toc-text">Pandas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scipy-power-version-of-numpy"><span class="toc-number">5.</span> <span class="toc-text">Scipy(power version of numpy)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scikit-Learn"><span class="toc-number">6.</span> <span class="toc-text">Scikit-Learn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Steps-of-a-Machine-Learning-Script"><span class="toc-number">7.</span> <span class="toc-text">The Steps of a Machine Learning Script</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Outline"><span class="toc-number"></span> <span class="toc-text">Outline</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-machine-learning"><span class="toc-number">1.</span> <span class="toc-text">What is machine learning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Classfication-and-Regression"><span class="toc-number">2.</span> <span class="toc-text">Classfication and Regression</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Loss"><span class="toc-number">3.</span> <span class="toc-text">Loss</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Minimizing-Cost"><span class="toc-number">4.</span> <span class="toc-text">Minimizing Cost</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gradient-Descent"><span class="toc-number">5.</span> <span class="toc-text">Gradient Descent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试："><span class="toc-number">6.</span> <span class="toc-text">测试：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Aritificial-Neural-Networks-ANNS"><span class="toc-number">7.</span> <span class="toc-text">Aritificial Neural Networks(ANNS)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reasons-for-the-disappearance-of-the-gradient"><span class="toc-number">8.</span> <span class="toc-text">Reasons for the disappearance of the gradient:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reasons-for-gradient-explosion"><span class="toc-number">9.</span> <span class="toc-text">Reasons for gradient explosion:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-solve-it"><span class="toc-number">10.</span> <span class="toc-text">How to solve it?</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/12/13/KPc9zZ4hNn3CMta.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">DEAL-II-Fluid</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 索引</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/x-codepen/"><i class="fa-fw fa fa-magic"></i><span> codepen</span></a></li><li><a class="site-page" href="/x-gallery/"><i class="fa-fw fa fa-beer"></i><span> gallery</span></a></li><li><a class="site-page" href="/x-shadertoy/"><i class="fa-fw fa fa-star"></i><span> shadertoy</span></a></li><li><a class="site-page" href="/x-webgl1/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl1</span></a></li><li><a class="site-page" href="/x-webgl2/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl2</span></a></li><li><a class="site-page" href="/x-markdown/"><i class="fa-fw fa fa-tree"></i><span> Vditor</span></a></li><li><a class="site-page" href="/x-DNN/"><i class="fa-fw fa fa-heartbeat"></i><span> DNN</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">machine learning for chaos system-基础知识</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-12-11 12:58:34"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-12-11</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-12-14 11:38:40"><i class="fas fa-history fa-fw"></i> 更新于 2020-12-14</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%84%9F%E6%82%9F/">学习与感悟</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源:"></a>学习资源:</h3><ul>
<li><a href="https://www.udemy.com/course/deep-learning-recurrent-neural-networks-in-python/learn/lecture/5335868?start=0#overview" target="_blank" rel="noopener">Udemy course: Recurrent Neural Networks in Python</a></li>
<li><p><a href="https://colab.research.google.com/notebooks/intro.ipynb#recent=true" target="_blank" rel="noopener">Google Colab</a></p>
<p>  <a href="https://colab.research.google.com/drive/1fMpsJhSfZ_2BN3XeAt6yLQdKPfNvTlmU?usp=sharing" target="_blank" rel="noopener">如何从Colab导入文档</a></p>
</li>
<li><p><a href="https://github.com/lazyprogrammer" target="_blank" rel="noopener">Github</a></p>
</li>
</ul>
<h3 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h3><ul>
<li>Matrix arithmetic</li>
<li>Tensor (aka. “arrays”)(note the name: Tensorflow)</li>
<li>1-D tensor(vector), 2-D tensor(matix)</li>
<li>Arithmetic: +,-,*,/</li>
<li>Matrix multiply == dot/inner product (np.dot)</li>
<li>Element-wise multiply(*)</li>
</ul>
<h3 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h3><ul>
<li>Line charts</li>
<li>Scatterplots</li>
</ul>
<h3 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h3><ul>
<li>Loading in tabular data</li>
</ul>
<h3 id="Scipy-power-version-of-numpy"><a href="#Scipy-power-version-of-numpy" class="headerlink" title="Scipy(power version of numpy)"></a>Scipy(power version of numpy)</h3><ul>
<li>Satistics, optimization, linear algebra, signal processing</li>
</ul>
<h3 id="Scikit-Learn"><a href="#Scikit-Learn" class="headerlink" title="Scikit-Learn"></a>Scikit-Learn</h3><ul>
<li>basic machine learning</li>
<li>Classification and regression</li>
<li>Machine learning as geometry rather than magic</li>
<li>Shape of data(X and Y)</li>
</ul>
<h3 id="The-Steps-of-a-Machine-Learning-Script"><a href="#The-Steps-of-a-Machine-Learning-Script" class="headerlink" title="The Steps of a Machine Learning Script"></a>The Steps of a Machine Learning Script</h3><ul>
<li>Load in the data<ol>
<li>X and Y</li>
<li>Typically use Pandas unless the data is to complex</li>
</ol>
</li>
<li>Split into train/test sets (sometimes)<ol>
<li>Sometimes “test” and “validation” are used interchangebly, and the “true test set” is something else- don’t get frazzled over this.</li>
</ol>
</li>
<li>Build a model<ol>
<li>OOP (object oriented programming)</li>
<li>Tensorflow 2.0 standard is Keras API, very similar to Scikit-learn</li>
</ol>
</li>
<li>Fit the model(gradinet descent)<ol>
<li>model.fit(X,Y)</li>
</ol>
</li>
<li>Evaluate the model</li>
<li>Make predictions<ol>
<li>model.predict(X)</li>
</ol>
</li>
</ul>
<h2 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h2><h3 id="What-is-machine-learning"><a href="#What-is-machine-learning" class="headerlink" title="What is machine learning"></a>What is machine learning</h3><p>look for patterns for data and make better prediction in furture</p>
<h3 id="Classfication-and-Regression"><a href="#Classfication-and-Regression" class="headerlink" title="Classfication and Regression"></a>Classfication and Regression</h3><p>Classfication:</p>
<ul>
<li>predict a category/ lable</li>
<li>yes or not / dog or cat</li>
<li>SVM</li>
</ul>
<p>Regression: (more features,nonlinear makes problem complicated)</p>
<ul>
<li>Fit a line or curve</li>
</ul>
<p><em>ŷ</em> = <em>mx</em> + <em>b</em></p>
<p>The Decision Rule</p>
<ul>
<li>sigmoid functions</li>
</ul>
<p><em>ŷ</em> = <em>σ</em>(<em>a</em>), <em>a</em> = <em>w</em>1<em>x</em>1 + <em>w</em>2<em>x</em>2 + <em>b</em></p>
<p>Probabilistic Interpretation</p>
<p><em>p</em>(<em>y</em> = 1|<em>x</em>) = <em>σ</em>(<em>a</em>)</p>
<p>Logistic Regression with &gt;2 Inputs</p>
<ul>
<li>What if we have &gt; 2 input?</li>
<li>Use matrices/ vectors</li>
</ul>
<p>$p(y= 1| x)=\sigma(w^T x + b)= \sigma (\sum_{d=1}^D w_d x_d +b)$</p>
<p><strong>Sigmoid neurons are similar to perceptrons, but modified so that small changes in their weights and bias cause only a small change in their output.</strong></p>
<script type="math/tex; mode=display">
\triangle output:\approx \sum_j {\partial output\over \partial w_j}\triangle w_j +{\partial output \over \partial b}\triangle b</script><p>Those say that $\triangle output$ is a linear function of the changes $\triangle w_j$ and $\triangle b$ in the weights and bias. make it much easier to figure out how changing the weights and biases will change the output.</p>
<p>sigmoid function is defined by:</p>
<script type="math/tex; mode=display">
\sigma(z)= {1\over 1+ e^{-z}}</script><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/14/EqZYNKJznyhsPRC.png" alt="https://i.loli.net/2020/12/13/pjS2kOK9HsB1weT.png" style="zoom:50%;" /></p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/pjS2kOK9HsB1weT.png" alt="https://i.loli.net/2020/12/13/pjS2kOK9HsB1weT.png"></p>
<p><a href="https://i.loli.net/2020/12/13/pjS2kOK9HsB1weT.png" target="_blank" rel="noopener">https://i.loli.net/2020/12/13/pjS2kOK9HsB1weT.png</a></p>
<p>In Tnesorflow 2.0</p>
<ul>
<li>Is mostly an exercise in “API hunting”</li>
<li>The actual math isn’t written in code (by you)</li>
<li>Your job is to find the function that implements the math in question</li>
<li>tf.keras.layers.Dense(Output_size)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model &#x3D; tf.keras.models.Sequential([    tf.keras.layers.Input(shape&#x3D;(D,)),    tf.keras.layers.Dense(1, activation&#x3D;&#39;sigmoid&#39;)])</span><br></pre></td></tr></table></figure>
<ul>
<li>cost function</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.compile (optimizer &#x3D; &#39;adam&#39;,                             loss &#x3D; &#39;binary_crossentropy&#39;,                             metrics &#x3D; [&#39;accuracy&#39;])</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/TpoVjywRnrqxOMX.png" alt="https://i.loli.net/2020/12/13/TpoVjywRnrqxOMX.png"></p>
<p><a href="https://i.loli.net/2020/12/13/TpoVjywRnrqxOMX.png" target="_blank" rel="noopener">https://i.loli.net/2020/12/13/TpoVjywRnrqxOMX.png</a></p>
<ul>
<li>Accuracy</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.compile(optimizer&#x3D;&#39;adam&#39;,                            loss &#x3D; &#39;binary_crossentropy&#39;,                            metrics &#x3D; [&#39;accuracy&#39;])</span><br></pre></td></tr></table></figure>
<script type="math/tex; mode=display">
accuracy = {\# correct\over \# total}</script><ul>
<li>Training / Fitting</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r &#x3D; model.fit (X_train, y_train,                             validation_data &#x3D; (X_test, y_test),                             epochs&#x3D;100)plt.plot(r.history[&#39;loss&#39;],label&#x3D;&#39;loss&#39;)plt.plot(r.history[&#39;val_loss&#39;],label&#x3D;&#39;val_loss&#39;)</span><br></pre></td></tr></table></figure>
<p>To be conclude,</p>
<ul>
<li>Prediction = Round( <em>σ</em>(<em>Wx</em> + <em>b</em>) )</li>
<li>Implemented with Keras <em>Dense</em> layer</li>
<li><em>compile()</em> to specify optimizer (adam), loss (binary cross entropy), metrics(accuracy)</li>
<li><em>fit()</em> returns a history object, so we can plot loss per iteration</li>
</ul>
<h3 id="Loss"><a href="#Loss" class="headerlink" title="Loss"></a>Loss</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.compile (optimizer = tf.keras.optimizers.SGD(<span class="number">0.001</span>, <span class="number">0.9</span>), loss=<span class="string">'mse'</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>MSE = mean squared error</li>
</ul>
<p>$MSE={1\over N} \sum_{i=1}^N (y_i -\hat{y_i})^2$</p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/ovTb9lGDyKBLEWH.png" alt="https://i.loli.net/2020/12/13/ovTb9lGDyKBLEWH.png"></p>
<h3 id="Minimizing-Cost"><a href="#Minimizing-Cost" class="headerlink" title="Minimizing Cost"></a>Minimizing Cost</h3><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/ivJCbIKwQyXa1lW.png" alt="https://i.loli.net/2020/12/13/ivJCbIKwQyXa1lW.png"></p>
<p>The multidimensional equivalnet of <em>derivative</em>  is the <strong>gradient</strong></p>
<p>$\nabla_w J =({\partial J\over \partial w_1},{\partial J\over \partial w_2},…,{\partial J \over \partial w_D})$</p>
<p>$Set: \nabla_w J =0, solve \space for \space w$</p>
<p>TensorFlow done this for us by <em>automatic differentitation</em></p>
<ul>
<li>Tensorflow automatically finds the gradient of loss wrt all tour model weights</li>
<li>Tensorflow uses the gradients to train your model</li>
</ul>
<h3 id="Gradient-Descent"><a href="#Gradient-Descent" class="headerlink" title="Gradient Descent"></a>Gradient Descent</h3><ul>
<li>In most cases, it is not possible to solve for $anbla J=0$, using training <em>iterative</em> instead. (Linear Regression is the exception.)</li>
<li>gradient descent algorithm is inside the Keras <strong>fit</strong> function:</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">w,b = randomly initialized</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> range (epochs):</span><br><span class="line">    w = w - \eta * \nabla_w J</span><br><span class="line">    b = b - \eta * \nabla_b J</span><br><span class="line"><span class="comment"># \eta is called learning rate</span></span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/6DtZx4F1NLkhCyq.png" alt="https://i.loli.net/2020/12/13/6DtZx4F1NLkhCyq.png"></p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/3QxRBDhT6oa4FnK.png" alt="https://i.loli.net/2020/12/13/3QxRBDhT6oa4FnK.png"></p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/h8V9EMfx7uadzYk.png" alt="https://i.loli.net/2020/12/13/h8V9EMfx7uadzYk.png"></p>
<p><strong>The aim of our traning algorithm will be to minimize the cost $C(w,b)$ as a fucntion of the weights and biases.</strong> In other words, we want to find a set of weights and biases which make the cost as small as possible. </p>
<p>Gradient descent can be viewed as a way of taking small steps in the direction which does the most to immediately decrease C.</p>
<p><strong>stochastic gradient descent</strong> used to speed uop learning.</p>
<p>The idea is to estimate the gradient $\nabla C$ by computing $\nabla C_x$ for a small sample of randomly chosen training inputs. By averaging over this small sample it turns out that we can quickly get a good estimate of the true gradient $\nabla C$/</p>
<script type="math/tex; mode=display">
{\sum_{j=1}^m \nabla C_{X_j}\over m} \approx {\sum_x \nabla C_x\over n}=\nabla C</script><script type="math/tex; mode=display">
w_k \rightarrow w_k' = w_k - {\eta\over m} \sum_j {\partial C_{X_j}\over \partial w_k}\\\\
b_l \rightarrow b_l' = b_l - {\eta\over m}\sum_j {\partial C_{X_j}\over \partial b_l}</script><p>The Cauchy-Schwarz inequality:</p>
<p>for all vectors u and v of an inner product space, it is true that:</p>
<script type="math/tex; mode=display">
|<u,v>|^2\leq <u,u>\cdot <v,v></script><h3 id="测试："><a href="#测试：" class="headerlink" title="测试："></a>测试：</h3><p><strong>构建一个network</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Network</span><span class="params">(object)</span>:</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, sizes)</span>:</span></span><br><span class="line">  	self.num_layers = len(sizes)</span><br><span class="line">    self.sizes = sizes</span><br><span class="line">    self.biases = [np.random.randn(y,<span class="number">1</span>) <span class="keyword">for</span> y <span class="keyword">in</span> sizes[<span class="number">1</span>:]]</span><br><span class="line">    self.weights= [np.random.randn(y,x)</span><br><span class="line">                   <span class="keyword">for</span> x,y <span class="keyword">in</span> zip(sizes[:<span class="number">-1</span>], sizes[<span class="number">1</span>:])]</span><br></pre></td></tr></table></figure>
<p>Classfication:</p>
<p><a href="https://colab.research.google.com/drive/1M_otG1koa2qwix4-ScwZUzF_NB9rg4vD?usp=sharing" target="_blank" rel="noopener">https://colab.research.google.com/drive/1M_otG1koa2qwix4-ScwZUzF_NB9rg4vD?usp=sharing</a></p>
<p>Regression:</p>
<p><a href="https://colab.research.google.com/drive/1k-sj3NP0YNoaIXVNdaXF9WtyY9sMqosR#scrollTo=x5BY2x58MBrt" target="_blank" rel="noopener">https://colab.research.google.com/drive/1k-sj3NP0YNoaIXVNdaXF9WtyY9sMqosR#scrollTo=x5BY2x58MBrt</a></p>
<h3 id="Aritificial-Neural-Networks-ANNS"><a href="#Aritificial-Neural-Networks-ANNS" class="headerlink" title="Aritificial Neural Networks(ANNS)"></a>Aritificial Neural Networks(ANNS)</h3><p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/KPc9zZ4hNn3CMta.png" alt="https://i.loli.net/2020/12/13/KPc9zZ4hNn3CMta.png"></p>
<p><strong>Feedforward neural networks</strong></p>
<p>the signal just goes from left to right, we call it a “feedforward” neural network </p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/JOzT1kxHw9KvEQy.png" alt="https://i.loli.net/2020/12/13/JOzT1kxHw9KvEQy.png"></p>
<p>Different neural will find different features with inputs</p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/zKkhGtpC2fgbrvU.png" alt="https://i.loli.net/2020/12/13/zKkhGtpC2fgbrvU.png"></p>
<ul>
<li>a line : ax+b</li>
<li>a neuron: $\sigma(w^T x+b)$</li>
<li>Multiple Neurons per Layer:</li>
</ul>
<p>$z_j = \sigma(w_j^T x+ b_j),for  \space j=1…M$</p>
<p>Vectorize the neuron:</p>
<p>$Z=\sigma(W^T x +b)$</p>
<p>这一个单元：将M个特征的信息通过DxM的矩阵W转化到D个特征，然后非常类似于着色器里的sigma函数操作。整个过程一气呵成，GPU的作用可见一斑。</p>
<p><strong>Each neural network layer is a “feature transform”</strong></p>
<p>这种转化在neural network一层一层的迭代：</p>
<p>$z^{(1)} = \sigma(W^{(1)T}x + b^{(1)})\\$$z^{(2)}=\sigma(W^{2}T)z^{(1)}+b^{(2)})$</p>
<p>$z^{(3)}=\sigma(W^{(3)T}z^{(2)}+b^{3})$</p>
<p>…</p>
<p>$p(y=1|x)=\sigma(W^{(L)T}z^{(L-1)}+b^{(L)})$</p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/k1sSbpq6CTvflh2.png" alt="https://i.loli.net/2020/12/13/k1sSbpq6CTvflh2.png"></p>
<p><strong>The Geometric Picture</strong></p>
<ul>
<li>The neuron is nice and interpretable<ul>
<li>Large weights = important feature</li>
<li>Small weights = not import feature</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/12/13/ke3L6GMTpzJC5o7.png" alt="https://i.loli.net/2020/12/13/ke3L6GMTpzJC5o7.png"></p>
<p>$\hat{y} = ax^2 + bx + c, \\ Let: x_1 =x, x_2= x^2\\ Then: \hat{y} = w_1 x_1 + w_2 x_2 +b$</p>
<p>It’s nonlinear because of the <strong>sigmoid</strong></p>
<p>$W^{(2)T} \sigma(W^{(1)T}x+b^{(1)})+b^{(2)}$</p>
<p><strong>Convolutional Neural Networks (CNNs)</strong></p>
<p><strong>Recurrent Neural Networks(RNNs)</strong></p>
<p>a later neuron may connect back to an earlier neuron to created a recurrent connection</p>
<p><strong><em><a href="https://vinodsblog.com/2019/01/07/deep-learning-introduction-to-recurrent-neural-networks/" target="_blank" rel="noopener">Recurrent Neural Networks：</a></em></strong></p>
<p>A recurrent neural network is a class of artificial neural networks where connections between nodes form a directed graph along a temporal sequence. This allows it to exhibit temporal dynamic behavior. Derived from feedforward neural networks, RNNs can use their internal state to process variable length sequences of inputs. This makes them applicable to tasks such as unsegmented, connected handwriting recognition or speech recognition.</p>
<p>The main use of RNNs are when using google or Facebook these interfaces are able to predict the next word that you are about to type. RNNs have loops to allow information to persist. This reduces the complexity of parameters, unlike other neural networks. These neural nets are considered to be fairly good for modeling sequence data. RNNs keep track of a hidden state, that encodes information about the history of the system dynamics.</p>
<p>RNNs have the potential to overcome these scalability problems and be applied to high-dimensional spatio-temporal dynamics.</p>
<p>Recurrent neural networks are a linear architectural variant of recursive networks. They have a “memory” thus it differs from other neural networks. This memory remembers all the information about, what has been calculated in the previous state. It uses the same parameters for each input as it performs the same task on all the inputs or hidden layers to produce the output.</p>
<p>One of the biggest uniqueness RNNs have is “UAP- Universal Approximation Property” thus they can approximate virtually any dynamical system. This unique property forces us to say recurrent neural networks have something magical about them.</p>
<p>RNNs model has been proven to perform extremely well on temporal data. It has several variants including <strong>LSTMs</strong> (long short-term memory), <strong>GRUs</strong> (gated recurrent unit) and <strong>Bidirectional RNNs.</strong> Building models for natural language, audio files, and other sequence data got a lot easier with sequence algorithms.</p>
<p><strong>[Vanishing and Exploding Gradient Problem</strong>-limited](<a href="https://www.programmersought.com/article/93865613569/" target="_blank" rel="noopener">https://www.programmersought.com/article/93865613569/</a>)</p>
<p>This problem sent the major set back for RNNs to get popularity. Values in RNNs can explode or vanish due to a simple reason for remembering previous values. Previous values are good enough to confuse them and cause current values to keep increasing or decreasing &amp; take-over algorithm. Indefinite loops get formed that brings whole network halt.</p>
<p>For example, neurons might get stuck in the loop where it keeps multiplying the previous number to new number which can go to infinity if all numbers are more than one or get stuck at zero if any number is zero.</p>
<p><strong>If the weight is small, multiply it all the time, it will become small. Otherwise it will become very large.</strong>这样深度神经网络的训练也会失效。从深度网络的角度来讲，不同的层学习的速度差异很大，表现为网络中靠近输出的层学习的情况很好，靠近输入的层学习的很慢，有时甚至训练了很久，前几层的权值和刚开始随机初始化的值差不多。因此，梯度消失、爆炸，其根本原因在于反向传播训练法则backpropagation (BPTT)**，属于先天不足。</p>
<h3 id="Reasons-for-the-disappearance-of-the-gradient"><a href="#Reasons-for-the-disappearance-of-the-gradient" class="headerlink" title="Reasons for the disappearance of the gradient:"></a>Reasons for the disappearance of the gradient:</h3><ol>
<li>Neural network</li>
<li>The initialization weight is too small</li>
<li>Activation function sigmoid (Relu)</li>
</ol>
<h3 id="Reasons-for-gradient-explosion"><a href="#Reasons-for-gradient-explosion" class="headerlink" title="Reasons for gradient explosion:"></a>Reasons for gradient explosion:</h3><ol>
<li>Neural network</li>
<li>The initialization weight is too large</li>
</ol>
<h3 id="How-to-solve-it"><a href="#How-to-solve-it" class="headerlink" title="How to solve it?"></a>How to solve it?</h3><ol>
<li>Pre-training + fine-tuning</li>
</ol>
<p>其基本思想是每次训练一层隐节点，训练时将上一层隐节点的输出作为输入，而本层隐节点的输出作为下一层隐节点的 输入，此过程就是逐层“预训练”；在训练完成后，再对整个网络进行“微调”</p>
<ol>
<li>Gradient shear, regular</li>
</ol>
<p>梯度剪切这种方案主要是针对梯度爆炸问题，其思想是设置一个梯度阀值。</p>
<ol>
<li><strong>Long Short-Term Memory</strong> (LSTM)</li>
</ol>
<p>LSTMs employ gates that effectively <strong>remember</strong> and <strong>forget</strong> information thus alleviating the problem of vanishing gradients，可以缓解Vanishing and Exploding Gradient Problem。复杂的门可以接下来更新的时候“记住”前几次训练的“残留记忆”。</p>
<p>中间的具体对应关系参考下面的建模方法的图c，有点复杂： $$<br>g<em>t^f=\delta_f (W_f[h</em>{t-1},o<em>t]+b_f) , \space\space g_t^i =\delta_i (W_i[h</em>{t-1},o<em>t]+b_i)\\<br>\tilde{c}_t = tanh(W_c[h</em>{t-1},o<em>t]+b_t), \space c_t = g_t^f \odot c</em>{t-1} +g<em>t^i \odot \tilde{c}_t\\<br>g_t^o = \delta_h(W_h[h</em>{t-1},o_t]+b_h), \space\space h_t =g_t^o \odot tanh(c_t)</p>
<p>$$ 有点像电路板，<em>gtf</em>, <em>gti</em>, <em>gto</em>分别代表forget, input, output gates. <em>ot</em> is the observable input at time t, <em>ht</em> is the hidden state, <em>ct</em> is the cell state, W is weight matrices, b is biases. The symbol ⊙ denotes the element-wise product. <em>δ</em> is <a href="https://en.wikipedia.org/wiki/Sigmoid_function" target="_blank" rel="noopener">Sigmoid function</a>. The dimension of the hidden state <em>dh</em> (number of hidden units) controls the capacity of the cell to encode history information. The hidden-to-output functional form <em>fho</em> is given by a linear layer: <em>ôt</em> + 1 = <em>Woht</em>, <em>Wo</em> ∈ <em>Rd</em>0 × <em>dh</em></p>
<p><strong>Reservior Computing</strong></p>
<p><strong>Reservoir computing</strong> is a framework for computation derived from <a href="https://en.wikipedia.org/wiki/Recurrent_neural_network" target="_blank" rel="noopener">recurrent neural network</a> theory that maps input signals into higher dimensional computational spaces through the dynamics of a fixed, non-linear system called a reservoir.<a href="https://en.wikipedia.org/wiki/Reservoir_computing#cite_note-:4-1" target="_blank" rel="noopener">[1]</a> After the input signal is fed into the reservoir, which is treated as a “black box,” a simple readout mechanism is trained to read the state of the reservoir and map it to the desired output.<a href="https://en.wikipedia.org/wiki/Reservoir_computing#cite_note-:4-1" target="_blank" rel="noopener">[1]</a> The first key benefit of this framework is that training is performed only at the readout stage, as the reservoir dynamics are fixed.<a href="https://en.wikipedia.org/wiki/Reservoir_computing#cite_note-:4-1" target="_blank" rel="noopener">[1]</a> The second is that the computational power of naturally available systems, both classical and quantum mechanical, can be utilized to reduce the effective computational cost.<a href="https://en.wikipedia.org/wiki/Reservoir_computing#cite_note-2" target="_blank" rel="noopener">[2]</a></p>
<p><strong>建模方法</strong></p>
<p>机器学习预测时间序列。给定等间隔1/<em>trianglet</em>采样，可观测序列<em>o</em> ∈ <em>Rdo</em> ,{<em>o</em>1, …, <em>oT</em>}。输入前一个时间点的状态<em>ht</em> ∈ <em>Rdh</em>. <em>ht</em> = <em>fhh</em>(<em>ot</em>, <em>ht</em> − 1), <em>ôt</em> + 1 = <em>fho</em>(<em>ht</em>) <em>fhh</em> is hidden-to-hidden mapping, <em>fho</em> is the hidden-to-output mapping. 下面这四种模型都是这种结构，只是对f的实现和参数有所差异。参见：<sup><a href="#fn_4" id="reffn_4">4</a></sup></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/Jiaqi-knight/imgBase@main/2020-12-1182528.png" alt="https://cdn.jsdelivr.net/gh/Jiaqi-knight/imgBase@main/2020-12-1182528.png"></p>
<p>示意图</p>
<p><a href="https://github.com/pvlachas/char-rnn" target="_blank" rel="noopener">具体算法请参考</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Jiaqi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://deal-ii.com/post/f2bbe0e7/">http://deal-ii.com/post/f2bbe0e7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://deal-ii.com" target="_blank">DEAL-II-Fluid</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/machine-learning/">machine learning</a><a class="post-meta__tags" href="/tags/chao-s-theory/">chao's theory</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/12/13/CRJOLzqKD6FlQWx.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/post/d03a598f/"><img class="next-cover" data-src="https://i.loli.net/2020/12/13/CRJOLzqKD6FlQWx.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">machine learning for chaos system-测试篇</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/post/47358f5f/" title="machine learning for chaos system-应用"><img class="relatedPosts_cover" data-src="https://npg.copernicus.org/articles/27/373/2020/npg-27-373-2020-avatar-web.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-10</div><div class="relatedPosts_title">machine learning for chaos system-应用</div></div></a></div><div class="relatedPosts_item"><a href="/post/d03a598f/" title="machine learning for chaos system-测试篇"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/12/13/CRJOLzqKD6FlQWx.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-11</div><div class="relatedPosts_title">machine learning for chaos system-测试篇</div></div></a></div><div class="relatedPosts_item"><a href="/post/845ed395/" title="chaos-未完。。。"><img class="relatedPosts_cover" data-src="https://cdn.jsdelivr.net/gh/Jiaqi-knight/imgBase@main/chaoblogcover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-26</div><div class="relatedPosts_title">chaos-未完。。。</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div class="comments-items-1" data-name="Valine"><div class="vcomment" id="vcomment"></div><script>function loadvaline () {  
  var requestSetting = function (from,set) {
    var from = from
    var setting = set.split(',').filter(function(item){
    return from.indexOf(item) > -1
    });
    setting = setting.length == 0 ? from :setting;
    return setting
  }

  var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
  var requiredFields = requestSetting(['nick','mail'],'nick,mail')

  function initValine () {
    window.valine = new Valine({
      el:'#vcomment',
      appId: 'lJ3vEzEWaeVa6HpWNNbPrauw-gzGzoHsz',
      appKey: '16FI6zgDXwvw71g04yhHnnW0',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: guestInfo,
      pageSize: '10',
      lang: 'en',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      requiredFields: requiredFields
    });
  }
  loadScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || false) {
  window.addEventListener('load', loadvaline)
}
else {
  function loadOtherComment () {
    loadvaline()
  }
}</script></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Jiaqi</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 4.2.0"></head></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/calendar.js"></script><script src="/js/languages.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":120,"height":260},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>